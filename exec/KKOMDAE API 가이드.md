# API 명세서

| 기능                         | HTTP메서드 | EndPoint                  | Parameter(required)                                 | body(required) | 반환값 | 설명                                                                                                                                                                        |
| ---------------------------- | ---------- | ------------------------- | --------------------------------------------------- | -------------- | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 로그인                       | GET        | /api/sso/login            | String code(false), String error(false)             |                | {<br>    "jwt" : "string",<br>    "refreshToken" : "string"<br>} | 싸피 Oauth 로그인 리다이렉트 엔드포인트                                                                                                                                    |
| 토큰 재발급                  | POST       | /api/sso/refresh          |                                                     | {<br>    "refreshToken" : "string"<br>} | {<br>    "jwt" : "string",<br>    "refreshToken" : "string"<br>} | 토큰 재발급                                                                                                                                                                |
| 첫페이지에서 유저의 정보를 조회 | GET        | /api/user-info            | 이하 모든 api에 Bearer JWT 토큰 적용                   |                | {<br>  "userRentTestRes": [<br>    {<br>      "rentId": 0,<br>      "modelCode": "string",<br>      "serialNum": "string",<br>      "dateTime": "2025-04-10",<br>      "release": true,<br>      "rentPdfName": "string",<br>      "releasePdfName": "string",<br>      "onGoingTestId": 0,<br>      "stage": 0,<br>      "picStage": 0<br>    }<br>  ],<br>  "onGoingTestId": 0,<br>  "stage": 0,<br>  "picStage": 0,<br>  "name": "string"<br>} | userRentTestRes List는 유저의 대여 내역과 대여 내역의 기기정보, 대여/반납 테스트 현황을 표기. onGoingTestId, stage, picStage는 대여 내역에 대한 진행 중인 반납의 정보.<br>리스트 밖의 정보는 현재 진행 중인 대여 정보.<br>name은 실명. |
| 테스트 생성                  | POST       | /api/test                 | Long rentId(false)                                  |                |        | 테스트 시작을 위한 테스트 id 발급. 테스트 id는 테스트 진행 과정에서 지속적으로 필요.<br>대여일 경우 rentId 필요X, 반납시 rentId를 queryParam으로 전송                                                 |
| 사진 업로드                  | POST       | /api/photo                | int photoType, long testId                          | Multipart image | {<br>  "success": true,<br>  "status": "200",<br>  "message": "사진 업로드 및 저장 성공",<br>  "data": null<br>} | 노트북 사진을 업로드하는 api.<br>photoType에 따라 사진의 종류를 구분.<br>1 : 전면부<br>2 : 후면부<br>3 : 좌측면<br>4 : 우측면<br>5 : 모니터<br>6 : 키보드           |
| 테스트의 사진 URL LIST       | GET        | /api/photo                | long testId                                         |                | {<br>  "success": true,<br>  "status": "200",<br>  "message": "사진 url 반환 완료",<br>  "data": {<br>    "photo1_url": "사진 url",<br>    "photo2_name": "사진이름", …<br>  }<br>} | 테스트 id를 이용해 테스트의 사진 이름과 url을 반환                                                                                                                           |
| 사진 재업로드                | POST       | /api/re-photo             | int photoType, long testId                          | Multipart image | {<br>  "success": true,<br>  "status": "200",<br>  "message": "사진 업로드 및 저장 성공",<br>  "data": null<br>} | 노트북 사진을 재업로드하는 api.<br>photoType에 따라 사진의 종류를 구분.<br>1 : 전면부<br>2 : 후면부<br>3 : 좌측면<br>4 : 우측면<br>5 : 모니터<br>6 : 키보드           |
| 랜덤 키 생성                 | POST       | /api/random-key/{testId}    | long testId                                         |                | {<br>  "success": true,<br>  "status": "200",<br>  "message": "랜덤 키 생성",<br>  "data": "생성된 랜덤키"<br>} | 기기 체크 프로그램을 위한 검증 키 생성.<br>JWT 토큰 필요 없음                                                                                                                  |
| 랜덤 키 검증                 | GET        | /api/verify-key           | String key                                          |                | {<br>  "success": true,<br>  "status": "200",<br>  "message": "유효한 키입니다",<br>  "data": {"isvalid" : "true"}<br>} | 검증 키 검증.<br>JWT 토큰 필요 없음                                                                                                                                        |
| 노트북 테스트 결과 개별 저장  | POST       | /api/test-result          |                                                     | {<br>  "randomKey": "랜덤키",<br>  "testType": "키보드",<br>  "success": true,<br>  "detail": "k,l",<br>  "summary": ""<br>} | {<br>  "success": true,<br>  "status": "200",<br>  "message": "테스트 결과가 성공적으로 저장되었습니다.",<br>  "data": null<br>} | 기기 체크 프로그램의 테스트 결과를 저장하는 api.<br>JWT 토큰 필요 없음                                                                                                         |
| Stage 2 테스트 결과 반환       | GET        | /api/test-result/{testId}   | long testId                                         |                | {<br>  "success": true,<br>  "status": "OK",<br>  "message": "테스트 결과를 성공적으로 반환",<br>  "data": {<br>    "success": true,<br>    "battery_report": true,<br>    "camera_status": true,<br>    "charging_status": false,<br>    "keyboard_status": false,<br>    "usb_status": false,<br>    "failed_keys": "4,BACK,C",<br>    "battery_report_url": "battery_report_DESKTOP-4QCTMKG_20250410_094921.html",<br>    "failed_ports": "port2,port3"<br>  }<br>} | Stage 2의 결과를 확인하는 api                                                                                                                     |
| Stage 2 → Stage 3로 상태 전환    | POST       | /api/secondToThird/{testId} |                                                     |                | {<br>  "success": true,<br>  "status": "200",<br>  "message": "3스테이지 변경 완료",<br>  "data": null<br>} | Stage 2가 끝나고 호출해야 하는 테스트 단계를 업데이트하는 api                                                                                                              |
| 노트북 테스트 결과 한번에 입력  | POST       | /api/secondStage          |                                                     | {<br>  "testId": 0,<br>  "keyboardStatus": true,<br>  "failedKeys": "s",<br>  "usbStatus": true,<br>  "failedPorts": "1",<br>  "cameraStatus": true,<br>  "chargerStatus": true,<br>  "batteryReport": true,<br>  "batteryReportUrl": "url"<br>} | {<br>  "success": true,<br>  "status": "200",<br>  "message": "qr 정보 입력 성공",<br>  "data": null<br>} | Stage2를 한 번에 입력하는 api                                                                                                                                |
| 기기 정보 입력                | POST       | /api/thirdStage           |                                                     | {<br>  "testId": 0,<br>  "release": true,<br>  "modelCode": "string",<br>  "serialNum": "string",<br>  "barcodeNum": "string",<br>  "localDate": "2025-04-10",<br>  "laptop": 0,<br>  "powerCable": 0,<br>  "adapter": 0,<br>  "mouse": 0,<br>  "bag": 0,<br>  "mousePad": 0<br>} | {<br>  "success": true,<br>  "status": "200",<br>  "message": "기기 정보 입력 성공",<br>  "data": null<br>} | 대여/반납 기기 정보를 입력하는 api.<br>반납일 경우 release=false.<br>localDate는 수령/반납 일자.<br>그 외는 물품 갯수                                                                     |
| 비고 입력                    | POST       | /api/fourthStage          |                                                     | {<br>  "testId": 0,<br>  "description": "string"<br>} | {<br>  "success": true,<br>  "status": "200",<br>  "message": "비고 입력 성공",<br>  "data": null<br>} | 기타 특이사항 입력                                                                                                                                        |
| 테스트 최종 결과 조회         | GET        | /api/laptopTotalResult    | long testId                                         |                | {<br>  "keyboardStatus": true,<br>  "useStatus": true,<br>  "cameraStatus": true,<br>  "batteryStatus": true,<br>  "chargerStatus": true,<br>  "modelCode": "string",<br>  "serialNum": "string",<br>  "barcodeNum": "string",<br>  "date": "2025-04-10",<br>  "laptopCount": 0,<br>  "mouseCount": 0,<br>  "powerCableCount": 0,<br>  "bagCount": 0,<br>  "adapterCount": 0,<br>  "mousepadCount": 0,<br>  "description": "string",<br>  "imageUrls": [<br>    "url", …<br>  ]<br>} | 최종적으로 진행된 테스트를 확인하는 api                                                                                                                   |
| PDF 생성 및 테스트 완료       | POST       | /api/pdf/{testId}         | long testId                                         |                | {<br>  "success": true,<br>  "status": "200",<br>  "message": "PdfName",<br>  "data": null<br>} | 테스트 결과를 바탕으로 PDF를 제작하고 테스트를 종료처리, PDF의 이름을 반환하는 api                                                                                    |
| 관리자 페이지 MM 정보 알림      | POST       | /api/notification         |                                                     | [<br>  "string"<br>] |        | 지정된 메시지를 지정된 MM 유저에게 보내는 api.<br>MM 서버 이용 제한으로 하드코딩된 유저에게 메시지 전송 중                                                                           |
| 관리자 페이지 MM 재촉 알림      | POST       | /api/alert                |                                                     | [<br>  "string"<br>] |        | 지정된 메시지를 지정된 MM 유저에게 보내는 api.<br>MM 서버 이용 제한으로 하드코딩된 유저에게 메시지 전송 중                                                                           |
| 파일 이름으로 S3 URL 반환       | GET        | /api/test-file/{file-name} |                                                     |                | {<br>  "url": "string"<br>} | 파일 이름으로 s3 url을 반환하는 api                                                                                                                             |
| 테스트의 ai 분석된 사진들의 url List | GET        | /api/ai-photo             | long testId                                         |                | {<br>  "success": true,<br>  "status": "OK",<br>  "message": "분석 사진 url 반환 완료",<br>  "data": {<br>    "photo1_ai_name": "name.jpg",<br>    "photo6_ai_damage": 0,<br>    "photo2_ai_name": "name2.jpg",<br>    "photo1_ai_url": "url",<br>    "photo4_ai_damage": 0,<br>    "photo5_ai_damage": 0, …<br>  }<br>} | ai 분석된 사진의 이름과 url을 얻는 api |

